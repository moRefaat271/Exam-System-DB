window.repositoryObject = {"parameters_custom_fields":[],"object_id":"p359","name":"updateStudentCourse","subtype":"PROCEDURE","is_user_defined":false,"description":null,"summary":[{"field":"Documentation","value":{"_type":"link","name":"ITI-Exam System DB","id":"d10"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"updateStudentCourse"},{"field":"Type","value":"Procedure"}],"script":"create proc updateStudentCourse @stu_id int = 0 , @newCrs_id int = 0 , @oldCrs_id int = 0 \r\nas\r\n\tif (\r\n\texists(select @newCrs_id from [dbo].[course]\r\n\t\twhere crs_id=@newCrs_id)\r\n\t\tand\r\n\texists(select st_id from [dbo].[student_course]\r\n\t\twhere st_id=@stu_id)\r\n\t\tand\r\n\texists(select @oldCrs_id from [dbo].[course]\r\n\t\twhere crs_id=@oldCrs_id)\r\n\t\t)\r\n\tbegin\r\n\t\tif @stu_id != 0 and @newCrs_id !=0\r\n\t\tbegin\r\n\t\t--updating student course (crs_id) depending on student ID and old course id\r\n\t\tupdate [dbo].[student_course]  set crs_id=@newCrs_id  where st_id = @stu_id and  crs_id=@oldCrs_id\t\r\n\t\tend\r\n\tend\r\n\telse \r\n\t\tselect 'Invalid update...'","parameters":[{"name":"stu_id","description":null,"mode":"IN","data_type":"int","custom_fields":{}},{"name":"newCrs_id","description":null,"mode":"IN","data_type":"int","custom_fields":{}},{"name":"oldCrs_id","description":null,"mode":"IN","data_type":"int","custom_fields":{}}],"dependencies":{"uses":[],"used_by":[]},"imported_at":"2023-01-19 22:19"};