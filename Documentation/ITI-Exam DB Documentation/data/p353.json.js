window.repositoryObject = {"parameters_custom_fields":[],"object_id":"p353","name":"updateExam","subtype":"PROCEDURE","is_user_defined":false,"description":null,"summary":[{"field":"Documentation","value":{"_type":"link","name":"ITI-Exam System DB","id":"d10"}},{"field":"Schema","value":"dbo"},{"field":"Name","value":"updateExam"},{"field":"Type","value":"Procedure"}],"script":"create proc updateExam \r\n@ex_id int,@duration int = null,@date date = null, @crs_id int = null \r\nAS\r\nbegin try \r\n\t\r\n\tIF not exists(SELECT Exam_id FROM Exam WHERE Exam_id = @ex_id)\r\n\t\tSELECT 'Invalid ----> Exam ID does not exist'\r\n\r\n\tif @duration is null  SET @duration=(SELECT exam_duration FROM Exam WHERE Exam_id = @ex_id)\r\n\tif @date is null SET @date=(SELECT exam_date FROM Exam WHERE Exam_id = @ex_id) \r\n\tif @crs_id is null SET @crs_id=(SELECT crs_id FROM Exam WHERE Exam_id = @ex_id) \r\n\r\n\tELSE\r\n\tBEGIN\r\n\t\tIF @duration >0 -- avoid negative value...\r\n\t\tBEGIN\r\n\t\t\tUPDATE Exam SET\r\n\t\t\t\t\texam_duration= @duration, \r\n\t\t\t\t\texam_date= @date,\r\n\t\t\t\t\tcrs_id= @crs_id\r\n\t\t\tWHERE Exam_id = @ex_id\r\n\t\t\tSELECT 'Exam Updated Successfully'\r\n\t\tEND\r\n\t\tELSE\r\n\t\t\tSELECT ' Invalid ----> Exam Duration must be bigger than 0'\r\n\tEND\r\nend try \r\nbegin catch\r\n\r\n\tif ISNUMERIC(@crs_id) = 0\r\n\t\tselect ' Invalid ----> Course ID'\r\n\tif not exists(SELECT crs_id FROM course WHERE crs_id = @crs_id)\r\n\t\tselect ' Invalid ----> Course ID does not exist'\r\nend catch","parameters":[{"name":"ex_id","description":null,"mode":"IN","data_type":"int","custom_fields":{}},{"name":"duration","description":null,"mode":"IN","data_type":"int","custom_fields":{}},{"name":"date","description":null,"mode":"IN","data_type":"date","custom_fields":{}},{"name":"crs_id","description":null,"mode":"IN","data_type":"int","custom_fields":{}}],"dependencies":{"uses":[],"used_by":[]},"imported_at":"2023-01-19 22:19"};